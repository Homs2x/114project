<!DOCTYPE html>
<html>
  <head>
    <title>CCIS Connect</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Roboto", sans-serif;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed; /* Changed to fixed for proper overlay */
        z-index: 1000; /* Higher z-index to overlay content */
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto; /* Enable scroll if content is taller than viewport */
        background-color: rgba(0, 0, 0, 0.5);
      }

      .modal-content {
        background-color: #fff;
        margin: 5% auto; /* 5% from top */
        padding: 20px;
        border-radius: 8px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      .image-preview {
        max-width: 100%;
        max-height: 150px;
        margin-bottom: 10px;
        border-radius: 8px;
      }

      /* Success Message */
      #successMessage {
        display: none;
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background-color: #4caf50;
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        z-index: 1001; /* Above modal */
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <header
      class="bg-orange-600 text-white p-4 flex items-center justify-between"
    >
      <div class="flex items-center">
        <img
          alt="CCIS Logo"
          class="mr-2"
          height="40"
          src="Photos/CCISLOGO.png"
          width="40"
        />
        <div>
          <h1 class="text-lg font-bold">CCIS CONNECT</h1>
          <p class="text-sm">College of Computing and Information Sciences</p>
        </div>
      </div>
      <div>
        <a href="Login/Login.html">Logout</a>
      </div>
      <div>
        <input class="p-2 rounded" placeholder="Search" type="text" />
      </div>
    </header>

    <!-- Add a Post -->
    <section class="bg-white p-4 my-4 shadow-md text-center">
      <button
        id="addPostBtn"
        class="bg-blue-500 text-white px-4 py-2 rounded-full"
      >
        Add a Post
      </button>
    </section>

    <!-- Modal for Adding a Post -->
    <div id="postModal" class="modal">
      <div class="modal-content">
        <h2 class="text-xl font-bold mb-4">Add a New Post</h2>

        <!-- Title Input Field -->
        <input
          id="postTitle"
          type="text"
          placeholder="Enter post title"
          class="w-full p-2 border rounded mb-4"
        />

        <!-- Content Textarea -->
        <textarea
          id="postContent"
          placeholder="Write your post here..."
          class="w-full p-2 border rounded mb-4"
          rows="4"
        ></textarea>

        <!-- Image Upload -->
        <input type="file" id="postImage" class="mb-4" accept="image/*" />
        <img id="imagePreview" class="image-preview" style="display: none" />

        <div class="flex justify-end">
          <button
            id="closeModalBtn"
            class="bg-gray-300 text-black px-4 py-2 rounded mr-2"
          >
            Cancel
          </button>
          <button id="postBtn" class="bg-blue-500 text-white px-4 py-2 rounded">
            Post
          </button>
        </div>
      </div>
    </div>

    <!-- Posts -->
    <main class="p-4">
      <!-- Post Container -->
      <div id="postContainer">
        <section class="bg-orange-200 p-4 rounded-lg mb-4">
          <h2 class="text-xl font-bold mb-2">Congratulations.</h2>
          <p class="mb-2">
            The CCIS Team: Carlo L. Ope√±a, John Michael D. Dela Cruz, and Mark
            Anthony B. Dela Cruz, bagged the championship flag at the Hack4Gov
            Competition 2024.
          </p>
          <!-- Like Button and Counter -->
          <div class="flex items-center">
            <i
              class="fas fa-thumbs-up text-blue-500 cursor-pointer mr-2"
              onclick="likePost(this)"
            ></i>
            <span class="like-count">0</span> likes
          </div>
        </section>
      </div>
    </main>
    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
      <div class="modal-content">
        <h2 class="text-xl font-bold mb-4">Confirm Deletion</h2>
        <p>Are you sure you want to delete this post?</p>
        <div class="flex justify-end mt-4">
          <button
            id="cancelDeleteBtn"
            class="bg-gray-300 text-black px-4 py-2 rounded mr-2"
          >
            Cancel
          </button>
          <button
            id="confirmDeleteBtn"
            class="bg-red-500 text-white px-4 py-2 rounded"
          >
            Delete
          </button>
        </div>
      </div>
    </div>

    <footer
      class="bg-white p-4 fixed bottom-0 w-full flex justify-around border-t"
    >
      <div class="text-center">
        <i class="fas fa-newspaper text-orange-600 text-xl"> </i>
        <p class="text-sm">News</p>
      </div>
      <div class="text-center">
        <i class="fas fa-bullhorn text-gray-600 text-xl"> </i>
        <p class="text-sm">Announcement</p>
      </div>
      <div class="text-center">
        <i class="fas fa-search text-gray-600 text-xl"> </i>
        <p class="text-sm">Search</p>
      </div>
      <div class="text-center">
        <i class="fas fa-cog text-gray-600 text-xl"> </i>
        <p class="text-sm">Settings</p>
      </div>
    </footer>

    <script>
      const modal = document.getElementById("postModal");
      const openModalBtn = document.getElementById("addPostBtn");
      const closeModalBtn = document.getElementById("closeModalBtn");
      const postBtn = document.getElementById("postBtn");
      const postContainer = document.getElementById("postContainer");
      const postTitle = document.getElementById("postTitle");
      const postContent = document.getElementById("postContent");
      const postImage = document.getElementById("postImage");
      const imagePreview = document.getElementById("imagePreview");
      const deleteModal = document.getElementById("deleteModal");
      const confirmDeleteBtn = document.getElementById("confirmDeleteBtn");
      const cancelDeleteBtn = document.getElementById("cancelDeleteBtn");
      let postToDelete = null; // Holds the reference to the post that will be deleted

      openModalBtn.addEventListener("click", () => {
        modal.style.display = "block";
      });

      closeModalBtn.addEventListener("click", () => {
        modal.style.display = "none";
        postTitle.value = "";
        postContent.value = "";
        postImage.value = "";
        imagePreview.style.display = "none";
        imagePreview.src = "";
      });

      window.addEventListener("click", (event) => {
        if (event.target == modal) {
          modal.style.display = "none";
          postTitle.value = "";
          postContent.value = "";
          postImage.value = "";
          imagePreview.style.display = "none";
          imagePreview.src = "";
        }
      });

      postImage.addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = () => {
            imagePreview.src = reader.result;
            imagePreview.style.display = "block";
          };
          reader.readAsDataURL(file);
        }
      });

      function addNewPost(title, content, imageUrl) {
        const newPost = document.createElement("section");
        newPost.classList.add(
          "bg-white",
          "p-4",
          "rounded-lg",
          "mb-4",
          "shadow",
          "relative"
        );

        newPost.innerHTML = `
    <h2 class="text-xl font-bold mb-2">${title}</h2>
    ${imageUrl ? `<img src="${imageUrl}" class="image-preview mb-2" />` : ""}
    <p class="text-gray-700 mb-2">${content}</p>
    <div class="flex items-center">
      <i class="fas fa-thumbs-up text-blue-500 cursor-pointer mr-2" onclick="likePost(this)"></i>
      <span class="like-count">0</span> likes
    </div>
  `;

        // Create and style the delete button with trash can icon
        const deleteBtn = document.createElement("button");
        deleteBtn.innerHTML = `<i class="fas fa-trash-alt"></i>`; // Trash can icon
        deleteBtn.classList.add(
          "absolute",
          "top-2",
          "right-2",
          "text-gray-500",
          "hover:text-red-500"
        );
        deleteBtn.style.border = "none";
        deleteBtn.style.background = "transparent";
        deleteBtn.style.cursor = "pointer";

        // Add delete confirmation prompt
        deleteBtn.addEventListener("click", () => {
          const confirmation = confirm(
            "Are you sure you want to delete this post?"
          );
          if (confirmation) {
            newPost.remove();
          }
        });

        // Append delete button to the new post
        newPost.appendChild(deleteBtn);

        // Add the new post to the container
        postContainer.prepend(newPost);
      }

      postBtn.addEventListener("click", () => {
        const title = postTitle.value.trim();
        const content = postContent.value.trim();
        const imageUrl = imagePreview.src;

        if (title && content) {
          addNewPost(title, content, imageUrl !== "" ? imageUrl : null);
          postTitle.value = "";
          postContent.value = "";
          postImage.value = "";
          imagePreview.style.display = "none";
          imagePreview.src = "";
          modal.style.display = "none";
        } else {
          alert("Please enter both a title and content for your post.");
        }
      });

      function likePost(likeIcon) {
        const likeCount = likeIcon.nextElementSibling;
        let count = parseInt(likeCount.textContent);
        count++;
        likeCount.textContent = count;
      }
      function addNewPost(title, content, imageUrl) {
        const newPost = document.createElement("section");
        newPost.classList.add(
          "bg-white",
          "p-4",
          "rounded-lg",
          "mb-4",
          "shadow",
          "relative"
        );

        newPost.innerHTML = `
      <h2 class="text-xl font-bold mb-2">${title}</h2>
      ${imageUrl ? `<img src="${imageUrl}" class="image-preview mb-2" />` : ""}
      <p class="text-gray-700 mb-2">${content}</p>
      <div class="flex items-center">
        <i class="fas fa-thumbs-up text-blue-500 cursor-pointer mr-2" onclick="likePost(this)"></i>
        <span class="like-count">0</span> likes
      </div>
    `;

        // Create and style the delete button with trash can icon
        const deleteBtn = document.createElement("button");
        deleteBtn.innerHTML = `<i class="fas fa-trash-alt"></i>`; // Trash can icon
        deleteBtn.classList.add(
          "absolute",
          "top-2",
          "right-2",
          "text-gray-500",
          "hover:text-red-500"
        );
        deleteBtn.style.border = "none";
        deleteBtn.style.background = "transparent";
        deleteBtn.style.cursor = "pointer";

        // Add event to open delete confirmation modal
        deleteBtn.addEventListener("click", () => {
          deleteModal.style.display = "block";
          postToDelete = newPost; // Store reference to the post to delete
        });

        // Append delete button to the new post
        newPost.appendChild(deleteBtn);

        // Add the new post to the container
        postContainer.prepend(newPost);
      }

      // Close modal when cancel button is clicked
      cancelDeleteBtn.addEventListener("click", () => {
        deleteModal.style.display = "none";
        postToDelete = null;
      });

      // Confirm delete and remove post
      confirmDeleteBtn.addEventListener("click", () => {
        if (postToDelete) {
          postToDelete.remove();
          postToDelete = null;
        }
        deleteModal.style.display = "none";
      });

      window.addEventListener("click", (event) => {
        if (event.target == deleteModal) {
          deleteModal.style.display = "none";
          postToDelete = null;
        }
      });
    </script>
  </body>
</html>
